@model InternshipsManagmentProject.Data.Student

@{
    ViewBag.Title = "Student Profile";
}
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<link href="~/Content/Student.css" rel="stylesheet" />
<script src="/Scripts/Student.js"></script>
<table>
    <tr>
        <td id="parent_left">
            <div id="panel_left">
                <div class="profile_pic">Non deity viewer detected. Image will not be shown to protect their souls from obliteration with handsomeness.</div>
                <ul id="menu">
                    <li class="">Aplicarile Mele</li>
                    <li>Notificari</li>
                    <li>Manage CV</li>
                    <li>Editare Cont</li>
                    <li>Log out</li>
                </ul>
            </div>
        </td>
        <td>
            <div id="panel_right">
                <div>
                    <h3>Aplicarile Mele</h3>
                    @foreach (var item in Model.StudentInternships)
                    {
                        <div class="internship">

                            <span class="internship_drop"><strong>\/</strong></span> <strong>@item.Internship.Title</strong>

                            @if (!(bool)item.StatusOfApplication)
                            {
                                <ol class="progress progress--large">
                                    <li class="is-active" data-step="">Sent CV</li>
                                    <li class="" data-step="">Response</li>
                                    <li data-step="">Accepted</li>
                                    <li class="progress__last" data-step="">Review</li>
                                </ol>
                                <div>
                                    You've sent your CV.
                                    <br />
                                    <input type="submit" value="Sent CV" disabled>
                                </div>
                            }
                            else if ((bool)item.StatusOfApplication && !(bool)item.Completed)
                            {
                                <ol class="progress progress--large">
                                    <li class="is-complete" data-step="">Sent CV</li>
                                    <li class="is-active" data-step="">Response</li>
                                    <li data-step="">Accepted</li>
                                    <li class="progress__last" data-step="">Review</li>
                                </ol>
                                <div>
                                    The firm has received your CV.
                                    <br />
                                    <input type="submit" value="Waiting Response" disabled>
                                </div>
                            }
                            else if ((bool)item.Completed && !(bool)item.StarredForFurtherReview)
                            {
                                <ol class="progress progress--large">
                                    <li class="is-complete" data-step="">Sent CV</li>
                                    <li class="is-complete" data-step="">Response</li>
                                    <li class="is-active" data-step="">Accepted</li>
                                    <li class="progress__last" data-step="">Review</li>
                                </ol>
                                <div>
                                    The firm has accepted you!
                                    <br />
                                    <input type="submit" value="Accept" formaction="/Student/StudentFirmResponse/?response=true&id=@item.Internship.InternshipId">
                                    <input type="submit" value="Refuse" formaction="/Student/StudentFirmResponse/?response=false&id=@item.Internship.InternshipId">
                                </div>
                            }
                            else if ((bool)item.StarredForFurtherReview)
                            {
                                <ol class="progress progress--large">
                                    <li class="is-complete" data-step="">Sent CV</li>
                                    <li class="is-complete" data-step="">Response</li>
                                    <li class="is-complete" data-step="">Accepted</li>
                                    <li class="is-active" data-step="">Review</li>
                                </ol>
                                <div>
                                    Thank you for joining this internship. Please give us a feedback.
                                    <br />
                                    Rate:
                                    <input type="submit" value="1" formaction="/Student/StudentFirmRating/?rating=1&id=@item.Internship.InternshipId">
                                    <input type="submit" value="2" formaction="/Student/StudentFirmRating/?rating=2&id=@item.Internship.InternshipId">
                                    <input type="submit" value="3" formaction="/Student/StudentFirmRating/?rating=3&id=@item.Internship.InternshipId">
                                    <input type="submit" value="4" formaction="/Student/StudentFirmRating/?rating=4&id=@item.Internship.InternshipId">
                                    <input type="submit" value="5" formaction="/Student/StudentFirmRating/?rating=5&id=@item.Internship.InternshipId">
                                    Stars
                                </div>
                            }
                            else
                            {
                                <ol class="progress progress--large">
                                    <li class="" data-step="">Sent CV</li>
                                    <li class="" data-step="">Response</li>
                                    <li class="" data-step="">Accepted</li>
                                    <li class="progress__last" data-step="">Review</li>
                                </ol>
                                <div>
                                    <br />
                                    No idea how you got here...
                                </div>
                            }

                        </div>
                    }
                </div>
                <div>
                    <h3>Notificari</h3>
                </div>
                <div>
                    <h3>Manage CV</h3>
                </div>
                <div>
                    <h3>Editare Cont</h3>
                    <form action="/Student/StudentProfile" method="post" class="form_student" id="studentform">
                        <input type="hidden" name="selection" value="3" />
                        <table id="form_table">
                            <tr>
                                <td>
                                    Name:
                                    <input type="text" id="input_name" name="Name" value=@Model.Name>
                                </td>
                                <td>
                                    Last Name:
                                    <input type="text" id="input_lastName" name="LastName" value=@Model.LastName>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    City:
                                    <input type="text" id="input_city" name="City" value=@Model.City>
                                </td>
                                <td>
                                    Phone Number:
                                    <input type="text" id="input_phoneNumber" name="PhoneNumber" value=@Model.PhoneNumber>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    University:
                                    <input type="text" id="input_university" name="University" value=@Model.University>
                                </td>
                                <td>
                                    Domain:
                                    <input type="text" id="input_domain" name="Domain" value=@Model.Domain>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Link Github:
                                    <input type="text" id="input_linkGithub" name="LinkGitHub" value=@Model.LinkGithub>
                                </td>
                                <td>
                                    Birthday:<br />
                                    <input type="date" id="input_birthday" name="Birthday" value=@Model.Birthday>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Skills:
                                    <ul id="skillsList">
                                        @if (Model.Skills != null){
                                             foreach (var itemSkill in Model.Skills){
                                                <li>
                                                    <input name="Skills" value="@itemSkill" />
                                                </li>
                                                }
}
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="text" id="input_newSkill" value="New Skill"></td>
                                <td> <input type="button" id="addNewSkill" value="+" /></td>
                            </tr>
                            <tr>
                                <td>
                                    Bio:
                                    <textarea name="Bio" id="input_bio" rows="5" cols="50">@Model.Bio</textarea>
                                </td>
                            </tr>
                        </table>
                        <input id="form_button" type="button" value="Save Changes">
                        <input id="form_submit" type="submit" value="Save Changes">
                    </form>
                </div>
                <div>
                    <h3>Log out</h3>
                </div>

            </div>
        </td>
    </tr>
</table>


<script>
    var sel = 0;
    if (@ViewBag.Selection!=null) sel = @ViewBag.Selection;
    function RefreshMenu() {
        $("#panel_right>div").addClass("hidden");
        $("#panel_right>div:nth-child(" + (sel + 1) + ")").removeClass("hidden");
        $("#menu>li").attr("class", "menu_grayed");
        $("#menu>li:nth-child(" + (sel + 1) + ")").attr("class", "menu_selected");
    }
    $(()=> {
        RefreshMenu();
        FormSetup("Save Changes");
        $(".internship>div").slideUp(0);
        $("#menu>li").click(function () {
            $("#menu>li:nth-child(" + (sel + 1) + ")").attr("class", "menu_grayed");
            sel = $("#menu>li").index(this);
            $(this).attr("class", "menu_selected");
            RefreshMenu();
        });
        $(".internship_drop").click(function () {
            $(this).siblings("div").slideToggle(300);
            if ($(this).text() == "\\/") $(this).text("/\\");
            else $(this).text("\\/");
        });
    });
</script>
